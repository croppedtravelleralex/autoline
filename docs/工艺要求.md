# 工艺部对软件系统的管理要求

**文档状态**: 正式版
**编制**: 工艺部
**日期**: 2026-01-18

---

作为工艺管理部门，我们对生产线控制软件的核心诉求是：**数据真实不可篡改、流程严格受控、异常及时响应**。软件不仅仅是控制工具，更是质量管理的基石。

## 一、 配方管理 (Recipe Management) - *最核心资产*

1.  **版本控制**:
    *   所有工艺配方（Recipe）必须具备版本号（如 v1.0, v1.1）。
    *   **严禁** 在原有版本上直接修改保存。任何参数变更必须另存为新版本。
2.  **审批流**:
    *   `Draft` (草稿): 工程师拥有编辑权限。
    *   `Review` (审核): 工艺主管审核（只读）。
    *   `Approved` (批准): 工艺部长电子签核后方可下发至产线。
    *   **权限锁**: 操作员（Operator）仅能选择已批准的配方运行，**绝对禁止**修改任何参数。
3.  **参数比对**:
    *   软件需提供“版本比对”功能，高亮显示 v1.2 与 v1.1 之间的参数差异（如：加热时间由 10min -> 12min）。

## 二、 生产数据追溯 (Traceability)

1.  **一管一档**:
    *   每个微光像管（或批次）必须生成独立的电子批记录（EBR）。
    *   必须记录：小车ID、进出各腔室的精确时间戳、对应时段的最高/最低温度、真空度曲线。
2.  **数据颗粒度**:
    *   关键工序（激活、烘烤）：采样频率 $\ge 1 \text{Hz}$。
    *   非关键工序（冷却、待机）：采样频率 $\ge 0.1 \text{Hz}$。
3.  **数据完整性**:
    *   原始数据文件（Raw Data）必须加密存储，防止人为篡改（FDA 21 CFR Part 11 合规）。
    *   提供 Excel/CSV 导出功能供离线分析，但导出的数据仅供参考，不作为最终质量凭证。

## 三、 互锁与安全 (Interlock & Safety)

1.  **工艺互锁**:
    *   **真空互锁**: 当相邻腔室压差 $> 1 \text{级}$ (如 $10^{-3}$ vs $10^{-5}$) 时，软件必须屏蔽插板阀开启按钮，并弹出模态警示框。
    *   **温度互锁**: 当腔体温度 $> 100^\circ\text{C}$ 时，禁止开启通大气阀（Vent Valve），防止高温氧化。
2.  **防止呆滞**:
    *   若小车在高温区（>300°C）停留超时（如传输故障），系统需自动触发“降温保护程序”，而非被动等待人工处理。

## 四、 报警与异常管理 (Alarm Management)

1.  **分级报警**:
    *   **Level 1 (提示)**: 工艺参数偏离设定值 > 2%，但在公差范围内。记录日志，不报警。
    *   **Level 2 (警告)**: 参数超差，需人工介入。黄色声光，弹窗确认。
    *   **Level 3 (故障)**: 关键设备故障（泵停、加热断路）或严重超差。**红色声光，停机，短信/邮件推送给工艺主管**。
2.  **异常备注**:
    *   发生 Level 2 以上报警后，操作员必须在软件中填写“异常处理记录”方可复位报警，该记录需随批记录永久保存。

## 五、 人机交互体验 (HMI)

1.  **可视化**:
    *   必须以“拟物化”方式显示产线状态。加热开启时显示红色辉光，真空度越高背景越深。
    *   提供“趋势图趋势预测”：基于当前降温速率，预测还需几分钟到达出炉温度。
2.  **减少误操作**:
    *   关键操作（如：手动开启阀门、修改PID）需“长按 3秒”或“二次确认”。

---

**工艺部签署**: *Antigravity*
**日期**: 2026-01-18
# 六、 参数标准化与阈值设定

> 为确保生产线安全、可靠运行，所有关键工艺参数需定义 **正常范围 (Normal)**、**警告阈值 (Warning)**、**故障阈值 (Fault)**。系统在监测到参数超出对应阈值时自动产生相应级别的报警。

## 1. 关键工艺参数阈值表

| 参数名称 | 正常范围 | 警告阈值 | 故障阈值 | 示例说明 |
| :--- | :--- | :--- | :--- | :--- |
| 粗抽阀打开时长 | ≤ 30 min | > 30 min 且 ≤ 1 h | > 1 h | 粗抽阀打开超过 **1h**，系统判定 **黄色警告**，提示需排查阀门卡滞或泵性能下降。 |
| 高级规 (压差) | ≤ 1.0E‑1 Pa | > 1.0E‑1 Pa 且 ≤ 1.0E0 Pa | > 1.0E0 Pa | 当 **高级规** 大于 **1.0E0 Pa**，产生 **黄色警告**，要求检查真空泵或泄漏点。 |
| 真空度 (腔体) | 5.0E‑6 – 1.0E‑4 Pa | > 1.0E‑4 Pa 且 ≤ 5.0E‑3 Pa | > 5.0E‑3 Pa | 真空度超过 **5.0E‑3 Pa** 时触发 **红色故障**，自动停机并发送短信/邮件。 |
| 温度 (烘烤仓内) | 400 – 420 °C | > 420 °C 且 ≤ 440 °C | > 440 °C | 温度超过 **440 °C** 时，系统进入 **故障** 状态，关闭加热并报警。 |
| 温度 (烘烤仓外) | 420 – 430 °C | > 430 °C 且 ≤ 450 °C | > 450 °C | 外温超过 **450 °C** 触发 **警告**，提示检查温控回路。 |
| 小车停留时间 (高温区) | ≤ 4 h | > 4 h 且 ≤ 6 h | > 6 h | 小车在 **>300°C** 区域停留超过 **6h**，判定 **故障**，启动降温保护程序。 |

## 2. 报警处理流程

1. **Level 1（提示）**：参数偏离设定值 ≤ 2%，记录日志，无弹窗。
2. **Level 2（警告）**：参数进入 **警告阈值** 区间，弹出黄色警示框，要求操作员确认并填写异常备注。
3. **Level 3（故障）**：参数超过 **故障阈值**，系统红色报警并立刻停机，自动发送短信/邮件至工艺主管，同时记录异常处理记录。

## 3. 示例：粗抽阀打开时间异常

- **正常**：30 min 内完成粗抽阀打开并关闭。
- **警告**：若打开时间 **45 min**，系统弹出黄色警告，提示检查阀门是否卡滞。
- **故障**：若打开时间 **1.5 h**，系统判定 **故障**，立即停机并记录异常，要求维修工程师检查阀门密封与真空泵状态。

> **备注**：所有阈值均可在系统配置页面进行微调，以适配不同批次或设备的实际运行特性。
