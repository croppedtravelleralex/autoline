# 系统设置功能完善建议

本文档旨在针对当前的 AutoLine 软件系统提出系统设置功能的完善建议。目前系统设置页面仅为占位符，且大量业务逻辑参数硬编码在后端服务中，急需通过可视化的配置功能来提升系统的灵活性和可维护性。

## 一、 基础通用设置 (General Settings)

提供软件运行环境的基础配置。

*   **界面主题 (Theme)**: 提供“工业深色模式”与“高亮日间模式”切换，适应不同光照环境下的监控需求。
*   **语言设置 (Language)**: 支持中文/英文切换（目前部分已做，需统一管理）。
*   **系统名称与Logo**: 允许用户自定义顶部栏显示的工厂名称或产线标题。
*   **通知设置**: 配置浏览器通知权限，决定哪些级别的报警（Warning/Error）需要弹出桌面通知。

## 二、 业务工艺参数配置 (Process Parameters)

目前 `SimulationService` 中大量工艺参数（如升温曲线时长、真空度阈值、电子枪电压范围等）均为硬编码，建议将其参数化。

### 1. 报警阈值配置 (Alarm Thresholds)
*   **温度报警**: 为不同类型的腔体（烘烤、生长、对接）配置独立的“高温报警值”和“低温报警值”。
*   **真空报警**: 配置“破坏真空”的压力阈值和“本底真空”达标阈值。

### 2. 工艺配方管理 (Recipe Management)
*   建立“工艺配方”概念，替代代码中的硬编码逻辑。
*   **参数项**:
    *   烘烤周期时长（目前固定15h）
    *   生长工艺时长（目前固定12h）
    *   电子枪标准电压/电流
    *   铟封标准温度/压力
*   允许为不同批次的产品选择不同的工艺配方。

### 3. 仿真模拟参数 (Simulation Config)
针对演示和测试模式的专用设置：
*   **仿真加速倍率**: 允许调整时间流逝速度（如 1s = 1min），便于快速演示完整工艺流程。
*   **噪声模拟开关**: 开启/关闭温度和真空度的随机波动噪声。
*   **故障注入**: 允许手动触发“模拟故障”（如某腔体温度失控、真空泄漏），用于测试报警系统的响应。

## 三、 用户与权限管理 (User Access Control)

完善现有的用户管理模块。

*   **用户列表管理**: 增删改查系统用户。
*   **角色权限分配**:
    *   **管理员 (Admin)**: 可修改所有系统设置、编辑产线结构。
    *   **操作员 (Operator)**: 仅可操作小车进出、确认报警、查看日志。
    *   **观察员 (Observer)**: 仅只读查看数据，不可操作。
*   **安全策略**: 强制修改默认密码、登录会话超时设置。

## 四、 硬件与通信配置 (Hardware Interface)

为未来对接真实PLC/MES系统预留配置入口。

*   **通信协议选择**: 模拟模式 / Modbus TCP / HTTP API / MQTT。
*   **连接参数**: PLC IP地址、端口号、从站ID等。
*   **采集频率**: 设置数据轮询的时间间隔（如 1000ms）。

## 五、 数据管理策略 (Data Management)

*   **数据保留策略**: 设置历史数据保留时长（如：保留最近30天），自动清理过期数据以释放磁盘空间。
*   **数据备份**: 手动/自动备份系统数据库（SQLite文件或JSON记录）。
*   **数据导出**: 支持将特定时间段的温控/真空记录导出为 Excel 或 CSV 格式，用于离线分析。

## 六、 实施路线图建议

1.  **第一阶段**: 实现“基础通用设置”和“用户管理”，打通前端 `Settings` 页面与后端配置接口。
2.  **第二阶段**: 提取硬编码参数到配置文件（如 `config.json` 或 数据库），并在前端提供“工艺参数配置”界面。
3.  **第三阶段**: 实现“数据管理”和“仿真高级设置”，完善系统的运维能力。
