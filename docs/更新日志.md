# 更新日志

所有关于 AutoLine 项目的重大变更都将记录在此文件中。

## [1.1.0] - 2026-1-18 20:00:00 (Feature Update)
### 新增特性与架构升级
- **自动化测试框架 (Automated Testing)**:
    - 引入 **Vitest + React Testing Library**，建立前端自动化测试体系。
    - 完成核心组件 (`InterChamberValve`, `StatusLED`) 的单元测试覆盖。
- **UI 响应式与交互升级 (UI/UX)**:
    - **抽屉式菜单 (Responsive Drawer)**: 适配移动端布局，侧边栏可折叠为汉堡菜单。
    - **实时时钟**: 顶部导航栏显示精确到秒的系统时间。
    - **交互优化**: 侧边栏菜单项支持点击交互，新增“线体编辑”入口。
- **线体管理系统 (Dynamic Line Management)**:
    - **动态架构**: 后端 `SystemState` 重构，支持无限数量的线体配置 (不再局限于阳极/阴极线)。
    - **线体编辑器**: 前端新增 `LineEditorModal`，支持可视化的线体**增、删、改、查**。
    - **智能复制**: 实现线体深度复制功能，自动生成带有独立编码 (如 `xxx-copy-xxxx`) 的新线体及其下属腔体，大幅提升配置效率。

## [1.0.0] - 2026-1-18 19:30:00 (Major Release)
### 重大架构升级：前后端分离
本版本标志着系统从单纯的前端原型升级为具备完整后台逻辑的工业监控系统。

#### 新增特性 (Features)
- **后端服务 (Backend Service)**:
    - 基于 **FastAPI (Python)** 构建的高性能后端。
    - 实现了全功能的 REST API: `/api/state`, `/api/valve`, `/api/pump`, `/api/cart`。
    - 集成 **SimulationService (仿真引擎)**:
        - 实现了基于时间的**温度曲线模拟** (例如阳极烘烤仓 10h 升温流程)。
        - 实现了关联阀门状态的**真空度模拟**。
        - 实现了小车工序进度的后台即时计算。
- **前端重构 (Frontend Refactor)**:
    - 彻底移除前端 Mock 数据逻辑，全面接入后端 API。
    - 实现了 `api.ts` 服务层与 `useSystemState` 的轮询机制 (Polling)。
- **文档 (Documentation)**:
    - 发布了 《软件需求规格说明书 (SRS) v1.0》。
    - 新增 [测试启动步骤.md](file:///c:/Users/Lenovo/Desktop/program/autoline/测试启动步骤.md)，详细说明前后端环境配置与运行方法。
    - 补充了服务重启步骤说明。
    - 补充了后台服务的检查与强制停止方法 (netstat/taskkill)。

#### 优化 (Improvements)
- **互锁逻辑**:
    - **放气保护**: 后端强制校验，插板阀开启时禁止放气。
    - **冲泵警告**: 高压差下误开分子泵将触发 Warning 状态报警。
- **UI/UX**:
    - 解决了 Dashboard 在数据加载时的白屏问题，增加了错误边界 (ErrorBoundary) 保护。
    - 优化了数据刷新机制，确保卡片状态与后端实时同步。

## [0.0.5] - 2026-1-18 14:05:00
### 重构与优化
- **核心逻辑分离**: 引入 `transfer_valve` (传输插板阀) 概念，彻底将腔体间的连接控制与腔体内部的隔离控制 (`gate_valve`) 分离。
    - 现在所有**跨腔体移动**通过独立的传输阀进行控制。
    - 腔体内部的阀门操作不再影响连接通道的状态。
- **UI 工业化升级**: 重绘腔体间插板阀组件 (`InterChamberValve`)。
    - 采用 **Cyberpunk/Industrial** 风格设计。
    - 新增**平滑的开关门动画** (Framer Motion)。
    - 添加管道发光特效与动态状态指示灯 (运行中/动作中/关闭)。

## [0.0.4] - 2026-1-18 13:50:00
### 变更与优化
- **UI 升级**: 在腔体卡片之间新增独立的**插板阀控制组件**，直观显示连接状态。
- **拟真增强**: 插板阀操作响应时间调整为 **0.5s - 1s 随机**，更接近物理世界的不确定性。
- **逻辑严密化**: 小车穿越腔体时，必须确认**此路径上**的插板阀组件已打开，且目标位置空闲。

## [0.0.3] - 2026-1-18 13:35:00
### 新增功能
- **插板阀拟真逻辑**: 增加 0.5s 开闭响应延迟，模拟真实机械动作。
- **小车控制中心**: 点击小车可弹出详情卡片，查看包括工序进度、剩余时间在内的详细信息。
- **手动调度功能**: 支持手动控制小车前进/后退。
- **安全互锁系统**: 小车移动时自动检查插板阀状态及目标位置占用情况，防止误操作。

## [0.0.2] - 2026-1-18 13:20:50
- 代码更新 (61 files changed, 8077 insertions(+))

## [0.0.1] - 2026-1-18 12:28:36
- 建立版本更新功能，使用 Node.js 脚本自动管理版本和更新日志

## [0.0.0] - 2026-01-18
### 初始化
- 初始化项目结构和基本功能。
