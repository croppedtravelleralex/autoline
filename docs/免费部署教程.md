# AutoLine å…è´¹äº‘æœåŠ¡å™¨éƒ¨ç½²æ•™ç¨‹

æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•å°† AutoLine ç›‘æ§ç³»ç»Ÿ**å…è´¹**éƒ¨ç½²åˆ°äº‘å¹³å°ã€‚

---

## ç›®å½•

1. [å…è´¹å¹³å°å¯¹æ¯”](#å…è´¹å¹³å°å¯¹æ¯”)
2. [Railway éƒ¨ç½²ï¼ˆæ¨èï¼‰](#railway-éƒ¨ç½²æ¨è)
3. [Render éƒ¨ç½²](#render-éƒ¨ç½²)
4. [Vercel + Railway ç»„åˆéƒ¨ç½²](#vercel--railway-ç»„åˆéƒ¨ç½²)
5. [Fly.io éƒ¨ç½²](#flyio-éƒ¨ç½²)

---

## å…è´¹å¹³å°å¯¹æ¯”

| å¹³å° | å…è´¹é¢åº¦ | åç«¯æ”¯æŒ | å‰ç«¯æ”¯æŒ | æ¨èåœºæ™¯ |
|------|----------|----------|----------|----------|
| **Railway** | $5/æœˆé¢åº¦ | âœ… Python | âœ… é™æ€ | å…¨æ ˆé¦–é€‰ |
| **Render** | 750h/æœˆ | âœ… Python | âœ… é™æ€ | ç¨³å®šæ€§å¥½ |
| **Vercel** | æ— é™åˆ¶ | âŒ | âœ… é™æ€ | å‰ç«¯ä¸“ç”¨ |
| **Fly.io** | 3ä¸ªå°å‹VM | âœ… Docker | âœ… Docker | Docker éƒ¨ç½² |

---

## Railway éƒ¨ç½²ï¼ˆæ¨èï¼‰

Railway æä¾›æ¯æœˆ $5 å…è´¹é¢åº¦ï¼Œæ”¯æŒä¸€é”®éƒ¨ç½²ï¼Œæ“ä½œæœ€ç®€å•ã€‚

### æ³¨å†Œè´¦å·

1. è®¿é—® [https://railway.app](https://railway.app)
2. ä½¿ç”¨ GitHub è´¦å·ç™»å½•
3. å®Œæˆè´¦å·éªŒè¯

### éƒ¨ç½²åç«¯

**æ­¥éª¤ 1ï¼šåˆ›å»ºæ–°é¡¹ç›®**

```bash
# åœ¨ Railway ç½‘é¡µä¸Šç‚¹å‡» "New Project" â†’ "Deploy from GitHub repo"
# é€‰æ‹©ä½ çš„ä»“åº“ï¼Œé€‰æ‹© backend ç›®å½•
```

**æ­¥éª¤ 2ï¼šé…ç½®æ„å»ºè®¾ç½®**

åœ¨ Railway é¡¹ç›®è®¾ç½®ä¸­ï¼š

- **Root Directory**: `backend`
- **Build Command**: `pip install -r requirements.txt`
- **Start Command**: `uvicorn main:app --host 0.0.0.0 --port $PORT`

**æ­¥éª¤ 3ï¼šæ·»åŠ ç¯å¢ƒå˜é‡**

```
PORT=8001
ENV=production
```

**æ­¥éª¤ 4ï¼šç”ŸæˆåŸŸå**

ç‚¹å‡» "Settings" â†’ "Generate Domain"ï¼Œè·å–ç±»ä¼¼ `your-app.up.railway.app` çš„åŸŸåã€‚

### éƒ¨ç½²å‰ç«¯

**æ­¥éª¤ 1ï¼šä¿®æ”¹ API åœ°å€**

åœ¨å‰ç«¯é¡¹ç›®ä¸­åˆ›å»ºæˆ–ä¿®æ”¹ç¯å¢ƒå˜é‡ï¼š

```bash
# frontend/.env.production
VITE_API_URL=https://your-backend.up.railway.app
```

**æ­¥éª¤ 2ï¼šæ–°å»º Railway æœåŠ¡**

åœ¨åŒä¸€é¡¹ç›®ä¸­ç‚¹å‡» "New Service" â†’ "GitHub Repo"ï¼Œé€‰æ‹©å‰ç«¯ç›®å½•ã€‚

é…ç½®ï¼š
- **Root Directory**: `frontend`
- **Build Command**: `npm install && npm run build`
- **Start Command**: `npx serve dist -l $PORT`

æˆ–ä½¿ç”¨ Nginxï¼ˆåˆ›å»º `frontend/railway.json`ï¼‰ï¼š

```json
{
  "build": {
    "builder": "NIXPACKS"
  },
  "deploy": {
    "startCommand": "npx serve dist -l $PORT",
    "restartPolicyType": "ON_FAILURE"
  }
}
```

---

## Render éƒ¨ç½²

Render æä¾› 750 å°æ—¶/æœˆå…è´¹é¢åº¦ï¼Œéå¸¸é€‚åˆå°å‹é¡¹ç›®ã€‚

### æ³¨å†Œè´¦å·

1. è®¿é—® [https://render.com](https://render.com)
2. ä½¿ç”¨ GitHub ç™»å½•

### éƒ¨ç½²åç«¯

**æ­¥éª¤ 1ï¼šåˆ›å»º Web Service**

1. ç‚¹å‡» "New" â†’ "Web Service"
2. è¿æ¥ GitHub ä»“åº“
3. é…ç½®ï¼š
   - **Name**: `autoline-backend`
   - **Root Directory**: `backend`
   - **Runtime**: Python 3
   - **Build Command**: `pip install -r requirements.txt`
   - **Start Command**: `uvicorn main:app --host 0.0.0.0 --port $PORT`
   - **Instance Type**: Free

**æ­¥éª¤ 2ï¼šåˆ›å»º `render.yaml`ï¼ˆå¯é€‰ï¼‰**

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `render.yaml`ï¼š

```yaml
services:
  - type: web
    name: autoline-backend
    runtime: python
    rootDir: backend
    buildCommand: pip install -r requirements.txt
    startCommand: uvicorn main:app --host 0.0.0.0 --port $PORT
    envVars:
      - key: ENV
        value: production
    plan: free

  - type: web
    name: autoline-frontend
    runtime: static
    rootDir: frontend
    buildCommand: npm install && npm run build
    staticPublishPath: dist
    routes:
      - type: rewrite
        source: /*
        destination: /index.html
    plan: free
```

### éƒ¨ç½²å‰ç«¯

1. ç‚¹å‡» "New" â†’ "Static Site"
2. é…ç½®ï¼š
   - **Root Directory**: `frontend`
   - **Build Command**: `npm install && npm run build`
   - **Publish Directory**: `dist`

---

## Vercel + Railway ç»„åˆéƒ¨ç½²

**æœ€ä½³ç»„åˆæ–¹æ¡ˆ**ï¼šVercel éƒ¨ç½²å‰ç«¯ï¼ˆæ— é™å…è´¹ï¼‰ï¼ŒRailway éƒ¨ç½²åç«¯ã€‚

### Vercel éƒ¨ç½²å‰ç«¯

**æ­¥éª¤ 1ï¼šå®‰è£… Vercel CLI**

```bash
npm install -g vercel
```

**æ­¥éª¤ 2ï¼šéƒ¨ç½²**

```bash
cd frontend
vercel
# æŒ‰æç¤ºæ“ä½œï¼Œé€‰æ‹©é»˜è®¤é…ç½®å³å¯
```

**æ­¥éª¤ 3ï¼šé…ç½® vercel.json**

åœ¨ `frontend/vercel.json` ä¸­é…ç½® API ä»£ç†ï¼š

```json
{
  "rewrites": [
    {
      "source": "/api/:path*",
      "destination": "https://your-backend.up.railway.app/api/:path*"
    }
  ],
  "routes": [
    {
      "handle": "filesystem"
    },
    {
      "src": "/(.*)",
      "dest": "/index.html"
    }
  ]
}
```

**æ­¥éª¤ 4ï¼šé‡æ–°éƒ¨ç½²**

```bash
vercel --prod
```

---

## Fly.io éƒ¨ç½²

Fly.io æä¾› 3 ä¸ªå…è´¹å°å‹ VMï¼Œé€‚åˆ Docker éƒ¨ç½²ã€‚

### å®‰è£… CLI

```bash
# Windows (PowerShell)
powershell -Command "iwr https://fly.io/install.ps1 -useb | iex"

# macOS/Linux
curl -L https://fly.io/install.sh | sh
```

### ç™»å½•

```bash
fly auth login
```

### éƒ¨ç½²åç«¯

**æ­¥éª¤ 1ï¼šåˆå§‹åŒ–åº”ç”¨**

```bash
cd backend
fly launch
# é€‰æ‹©åº”ç”¨åç§°å’ŒåŒºåŸŸ
```

**æ­¥éª¤ 2ï¼šåˆ›å»º `fly.toml`**

```toml
app = "autoline-backend"
primary_region = "hkg"  # é¦™æ¸¯åŒºåŸŸï¼Œå›½å†…è®¿é—®è¾ƒå¿«

[build]
  dockerfile = "Dockerfile"

[http_service]
  internal_port = 8001
  force_https = true
  auto_stop_machines = true
  auto_start_machines = true
  min_machines_running = 0

[[vm]]
  cpu_kind = "shared"
  cpus = 1
  memory_mb = 256
```

**æ­¥éª¤ 3ï¼šéƒ¨ç½²**

```bash
fly deploy
```

### éƒ¨ç½²å‰ç«¯

```bash
cd frontend
fly launch
fly deploy
```

---

## é…ç½®å‰ç«¯ API åœ°å€

æ— è®ºä½¿ç”¨å“ªç§éƒ¨ç½²æ–¹å¼ï¼Œéƒ½éœ€è¦é…ç½®å‰ç«¯çš„ API åœ°å€ã€‚

### åˆ›å»ºç¯å¢ƒå˜é‡æ–‡ä»¶

**`frontend/.env.production`ï¼š**

```bash
# æ›¿æ¢ä¸ºä½ çš„åç«¯åœ°å€
VITE_API_URL=https://your-backend-url.com
```

### ä¿®æ”¹ API è¯·æ±‚é…ç½®

å¦‚æœå‰ç«¯ä½¿ç”¨ axiosï¼Œåœ¨ `frontend/src/api` æˆ–ç±»ä¼¼ä½ç½®ä¿®æ”¹åŸºç¡€ URLï¼š

```typescript
import axios from 'axios';

const api = axios.create({
  baseURL: import.meta.env.VITE_API_URL || '',
});

export default api;
```

---

## å…è´¹é¢åº¦æ³¨æ„äº‹é¡¹

### Railway
- æ¯æœˆ $5 é¢åº¦ï¼Œè¶³å¤Ÿè¿è¡Œå°å‹åº”ç”¨
- è¶…è¿‡é¢åº¦éœ€ç»‘å®šä¿¡ç”¨å¡
- ä¼‘çœ ç­–ç•¥ï¼š15 åˆ†é’Ÿæ— è¯·æ±‚åä¼‘çœ 

### Render
- å…è´¹å®ä¾‹ 15 åˆ†é’Ÿæ— è¯·æ±‚åä¼‘çœ 
- å†·å¯åŠ¨çº¦éœ€ 30 ç§’
- æ¯æœˆ 750 å°æ—¶è¶³å¤Ÿå•ä¸ªæœåŠ¡ 24/7 è¿è¡Œ

### Vercel
- é™æ€ç½‘ç«™å®Œå…¨å…è´¹
- æ— ä¼‘çœ é—®é¢˜
- å›½å†…è®¿é—®ç¨³å®š

### Fly.io
- 3 ä¸ªå…è´¹ VM
- æ— è‡ªåŠ¨ä¼‘çœ 
- éœ€è¦ä¿¡ç”¨å¡éªŒè¯ï¼ˆä¸ä¼šæ‰£è´¹ï¼‰

---

## å¸¸è§é—®é¢˜

### Q: åç«¯å†·å¯åŠ¨å¤ªæ…¢æ€ä¹ˆåŠï¼Ÿ

ä½¿ç”¨å®šæ—¶ ping ä¿æŒæœåŠ¡æ´»è·ƒï¼š

1. ä½¿ç”¨ [UptimeRobot](https://uptimerobot.com)ï¼ˆå…è´¹ï¼‰
2. é…ç½®æ¯ 5 åˆ†é’Ÿ ping ä¸€æ¬¡åç«¯ `/api/health`

### Q: å›½å†…è®¿é—®é€Ÿåº¦æ…¢ï¼Ÿ

- é€‰æ‹©äºšæ´²åŒºåŸŸæœåŠ¡å™¨ï¼ˆå¦‚ Fly.io é¦™æ¸¯ï¼‰
- å‰ç«¯ä½¿ç”¨ Vercelï¼ˆå›½å†…æœ‰èŠ‚ç‚¹ï¼‰
- è€ƒè™‘ä½¿ç”¨ Cloudflare CDN åŠ é€Ÿ

### Q: æ•°æ®ä¼šä¸¢å¤±å—ï¼Ÿ

å…è´¹å¹³å°é€šå¸¸ä¸æä¾›æŒä¹…åŒ–å­˜å‚¨ï¼Œå»ºè®®ï¼š
- ä½¿ç”¨ [Supabase](https://supabase.com)ï¼ˆå…è´¹ PostgreSQLï¼‰
- ä½¿ç”¨ [PlanetScale](https://planetscale.com)ï¼ˆå…è´¹ MySQLï¼‰
- ä½¿ç”¨ [MongoDB Atlas](https://mongodb.com/atlas)ï¼ˆå…è´¹ MongoDBï¼‰

---

## æ¨èéƒ¨ç½²æ–¹æ¡ˆ

| æ–¹æ¡ˆ | å‰ç«¯ | åç«¯ | é€‚åˆåœºæ™¯ |
|------|------|------|----------|
| **æ–¹æ¡ˆ A** | Vercel | Railway | æœ€ç¨³å®šï¼Œæ¨è |
| **æ–¹æ¡ˆ B** | Render | Render | ä¸€ç«™å¼ç®¡ç† |
| **æ–¹æ¡ˆ C** | Vercel | Fly.io | Docker ç†Ÿæ‚‰è€… |

---

## ä¸€é”®éƒ¨ç½²æŒ‰é’®ï¼ˆå¯é€‰ï¼‰

åœ¨é¡¹ç›® README ä¸­æ·»åŠ ä¸€é”®éƒ¨ç½²æŒ‰é’®ï¼š

```markdown
[![Deploy on Railway](https://railway.app/button.svg)](https://railway.app/template/xxx)

[![Deploy to Render](https://render.com/images/deploy-to-render-button.svg)](https://render.com/deploy)
```

---

ç¥éƒ¨ç½²é¡ºåˆ©ï¼ğŸš€
